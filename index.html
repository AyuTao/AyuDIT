<!doctype html>
<!--
 * 文件名: index.html
 * 描述: 主窗口页面。AyuDIT 的主界面与面板。
 *
 * GPLv3许可证声明:
 * Copyright (C) 2025 AyuTao
 *
 * This program is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License as published by
 * the Free Software Foundation, either version 3 of the License, or
 * (at your option) any later version.
 *
 * This program is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with this program. If not, see <https://www.gnu.org/licenses/>.
 *
 *
 * 作者: AyuTao
 * GitHub: https://github.com/AyuTao/AyuDIT
-->
<html>
    <head>
        <meta charset="UTF-8" />
        <meta http-equiv="Content-Security-Policy" content="default-src 'self'; img-src 'self' file: data: blob:; style-src 'self' 'unsafe-inline'; script-src 'self'; connect-src 'self'">
        <title>AyuDIT</title>
        <link rel="stylesheet" type="text/css" href="./css/styles.css" />
    </head>
    <body>
        <div class="header">
            <div class="header-title">
                <img src="img/logo.png" alt="Logo" />
                <h2 data-i18n-key="dashboardTitle"></h2>
            </div>
            <div class="header-info">
                <button id="refresh-button" class="icon-button" aria-label="Refresh" title="Refresh">⟳</button>
                <span id="project-name"></span>
                <button
                    id="settings-button"
                    class="custom-button"
                    data-i18n-key="settings"
                ></button>
            </div>
        </div>

        <div class="main-content">
            <div class="stats-container">
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="icon video">&#9654;</div>
                        <div class="stat-card-info">
                            <h4 data-i18n-key="footage"></h4>
                            <p id="video-count">0</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="icon audio">&#9835;</div>
                        <div class="stat-card-info">
                            <h4 data-i18n-key="audio"></h4>
                            <p id="audio-count">0</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="icon timeline">&#127909;</div>
                        <div class="stat-card-info">
                            <h4 data-i18n-key="timelines"></h4>
                            <p id="timeline-count">0</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="icon size">&#128190;</div>
                        <div class="stat-card-info">
                            <h4 data-i18n-key="totalSizeLabel"></h4>
                            <p id="total-size">0</p>
                        </div>
                    </div>
                </div>
            </div>

            <div class="timeline-selection-container">
                <div class="timeline-header">
                    <h3 data-i18n-key="timelineSelectionTitle"></h3>
                    <div class="button-group">
                        <button
                            id="render-video-button"
                            class="custom-button"
                            data-i18n-key="renderVideo"
                        ></button>
                        <button
                            id="export-thumbnails-button"
                            class="custom-button"
                            data-i18n-key="exportThumbnails"
                        ></button>
                        <button
                            id="generate-pdf-button"
                            class="custom-button"
                            data-i18n-key="generatePdf"
                        ></button>
                        <button
                            id="export-csv-button"
                            class="custom-button"
                            data-i18n-key="exportCsv"
                        ></button>
                    </div>
                </div>
                <div class="timeline-controls">
                    <button
                        id="select-all-timelines"
                        class="link-button"
                        data-i18n-key="selectAll"
                    ></button>
                    <span class="separator">|</span>
                    <button
                        id="deselect-all-timelines"
                        class="link-button"
                        data-i18n-key="deselectAll"
                    ></button>
                </div>
                <ul id="timeline-list" class="timeline-list"></ul>
            </div>
        </div>

        <!-- Donate/GitHub Floating Buttons -->
    <div class="fab-group">
        <button id="donate-fab" class="donate-fab" aria-label="Donate" title="Donate" data-i18n-key="donate"></button>
        <button id="github-fab" class="github-fab" aria-label="GitHub" title="GitHub">
            <svg class="github-icon" viewBox="0 0 24 24" aria-hidden="true">
                <path fill-rule="evenodd" d="M12 .5C5.648.5.5 5.648.5 12c0 5.088 3.292 9.396 7.864 10.915.575.105.786-.25.786-.556 0-.274-.01-1.002-.015-1.968-3.2.695-3.877-1.543-3.877-1.543-.523-1.329-1.277-1.684-1.277-1.684-1.044-.714.08-.7.08-.7 1.155.081 1.763 1.186 1.763 1.186 1.027 1.761 2.695 1.253 3.35.958.104-.744.402-1.253.73-1.541-2.555-.291-5.242-1.278-5.242-5.686 0-1.256.448-2.282 1.183-3.086-.119-.29-.512-1.461.112-3.046 0 0 .964-.309 3.162 1.179a10.96 10.96 0 0 1 2.879-.387c.977.005 1.962.131 2.879.387 2.197-1.488 3.159-1.179 3.159-1.179.626 1.585.233 2.756.114 3.046.737.804 1.182 1.83 1.182 3.086 0 4.418-2.693 5.392-5.257 5.678.413.356.78 1.056.78 2.13 0 1.539-.014 2.778-.014 3.157 0 .309.208.668.793.554C20.212 21.392 23.5 17.086 23.5 12 23.5 5.648 18.352.5 12 .5Z"/>
            </svg>
        </button>
        <button id="issue-fab" class="github-fab" aria-label="Report Bug" title="Report Bug">
                    <svg viewBox="0 0 24 24" aria-hidden="true">
                        <path d="M20 8h-2.1c-.3-.8-.8-1.5-1.5-2l1.5-1.5c.4-.4.4-1 0-1.4s-1-.4-1.4 0L14.5 4.1c-.6-.3-1.3-.5-2-.6V2h-1v1.5c-.7.1-1.4.3-2 .6L7.5 3.1c-.4-.4-1-.4-1.4 0s-.4 1 0 1.4L7.6 6c-.7.5-1.2 1.2-1.5 2H4c-.6 0-1 .4-1 1s.4 1 1 1h2c0 .3 0 .7.1 1H4c-.6 0-1 .4-1 1s.4 1 1 1h2.4c.8 2.8 3.3 5 6.2 5s5.4-2.1 6.2-5H20c.6 0 1-.4 1-1s-.4-1-1-1h-2.1c.1-.3.1-.7.1-1h2c.6 0 1-.4 1-1s-.4-1-1-1zM12 19c-2.5 0-4.5-2-4.5-4.5V10c0-2.5 2-4.5 4.5-4.5S16.5 7.5 16.5 10v4.5c0 2.5-2 4.5-4.5 4.5zm0-9c.6 0 1 .4 1 1v1c0 .6-.4 1-1 1s-1-.4-1-1v-1c0-.6.4-1 1-1z"/>
                    </svg>
                </button>
    </div>

    <!-- Donate Modal -->
    <div id="donate-modal" class="modal">
        <div class="modal-content">
            <span class="close-button">&times;</span>
            <h3 data-i18n-key="donateTitle"></h3>
            <div class="modal-body">
                <p data-i18n-key="donateDescription"></p>
                <div class="donate-grid">
                    <div class="donate-item">
                        <h4 data-i18n-key="donateWeChat"></h4>
                        <img src="./img/donate_wechat.png" alt="WeChat QR" class="donate-qr"/>
                    </div>
                    <div class="donate-item">
                        <h4 data-i18n-key="donateAlipay"></h4>
                        <img src="./img/donate_alipay.png" alt="Alipay QR" class="donate-qr"/>
                    </div>
                </div>
                <div class="donate-paypal">
                    <a id="paypal-link" class="paypal-button" href="https://paypal.me/ayutao" target="_blank" rel="noopener noreferrer">
                        <svg class="paypal-icon" viewBox="0 0 24 24" aria-hidden="true">
                            <path d="M19.5 7.1c-.4-2.6-2.6-4.4-5.9-4.4H7.9c-.5 0-.9.3-1 .8L5 18.9c-.1.5.3 1 .8 1h3.4l.4-2.7v.1c.1-.5.5-.8 1-.8h2.1c3.6 0 6.6-2 7.3-5.6.2-1.3.1-2.4-.5-3.8zM10.7 6.6h2.7c1.1 0 1.9.2 2.4.7.4.4.6 1 .5 1.8-.3 1.9-1.9 3.1-4.1 3.1H10l.7-5.6zm7.2 5.3c-.6 3.2-3.1 4.9-6.6 4.9h-1.6l-.3 2.1H7.1c-.3 0-.5-.3-.5-.6l1.6-11.5c0-.3.3-.6.6-.6h4.8c1.6 0 2.9.4 3.7 1.1.9.8 1.2 1.9 1.1 3.2z"/>
                        </svg>
                        <span data-i18n-key="openPayPal"></span>
                    </a>
                </div>
            </div>
        </div>
    </div>

        <!-- Settings Modal -->
        <div id="settings-modal" class="modal">
            <div class="modal-content">
                <span class="close-button">&times;</span>
                <h3 data-i18n-key="settings"></h3>
                <div class="modal-body">
                    <div class="form-group inline-group">
                        <div class="checkbox-item">
                            <label
                                for="language-select"
                                data-i18n-key="language"
                            ></label>
                            <select id="language-select">
                                <option value="en">English</option>
                                <option value="zh">中文</option>
                            </select>
                        </div>
                        <div class="checkbox-item">
                            <label
                                for="auto-refresh"
                                data-i18n-key="autoRefresh"
                            ></label>
                            <input type="checkbox" id="auto-refresh" checked />
                        </div>
                        <div class="checkbox-item">
                            <label
                                for="refresh-interval"
                                data-i18n-key="intervalSeconds"
                            ></label>
                            <input
                                type="number"
                                id="refresh-interval"
                                value="300"
                                min="1"
                            />
                        </div>
                        
                    </div>
                    <hr />
                    <div class="form-group form-row">
                        <label data-i18n-key="thumbnailSource"></label>
                        <div class="radio-group inline">
                            <label class="radio-item">
                                <input type="radio" name="thumb-source" value="first" id="thumb-src-first" />
                                <span data-i18n-key="firstShort"></span>
                            </label>
                            <label class="radio-item">
                                <input type="radio" name="thumb-source" value="middle" id="thumb-src-middle" />
                                <span data-i18n-key="middleShort"></span>
                            </label>
                            <label class="radio-item">
                                <input type="radio" name="thumb-source" value="last" id="thumb-src-last" />
                                <span data-i18n-key="lastShort"></span>
                            </label>
                        </div>
                    </div>
                    <hr>
                    <div class="form-group">
                        <label data-i18n-key="captureSettings"></label>
                        <div class="triple-row">
                            <div class="sub-field">
                                <label for="capture-wait-ms" data-i18n-key="captureMaxWait"></label>
                                <input type="number" id="capture-wait-ms" min="0" step="100" class="text-input" />
                            </div>
                            <div class="sub-field">
                                <label for="capture-retry-count" data-i18n-key="captureRetryCount"></label>
                                <input type="number" id="capture-retry-count" min="0" step="1" class="text-input" />
                            </div>
                            <div class="sub-field">
                                <label for="capture-retry-intervals" data-i18n-key="captureRetryIntervals"></label>
                                <input type="text" id="capture-retry-intervals" placeholder="250,500,800" class="text-input" />
                            </div>
                        </div>
                    </div>
                    <div class="form-group">
                        <label data-i18n-key="reportLogo"></label>
                        <div class="logo-preview-container">
                            <img id="logo-preview" src="./img/ayuditlogo.png" alt="Logo Preview">
                        <div class="logo-buttons">
                            <button id="change-logo-button" class="custom-button" data-i18n-key="change"></button>
                            <button id="reset-logo-button" class="link-button" data-i18n-key="resetToDefault"></button>
                        </div>
                    </div>
                </div>
                <div class="form-group form-row">
                    <label data-i18n-key="logs"></label>
                    <button id="open-log-dir-button" class="custom-button" data-i18n-key="openLogDir"></button>
                </div>
                    <hr>
                    <div class="form-group">
                        <label data-i18n-key="pdfCoverPage"></label>
                        <div class="checkbox-item">
                            <input type="checkbox" id="cover-enabled" checked>
                            <label for="cover-enabled" data-i18n-key="enableCoverPage"></label>
                        </div>
                        <div class="form-group form-row">
                            <label for="cover-dit-name" data-i18n-key="ditName"></label>
                            <input type="text" id="cover-dit-name" placeholder="DIT" class="text-input">
                        </div>
                        <div class="form-group">
                            <label for="cover-custom-fields" data-i18n-key="customFields"></label>
                            <textarea id="cover-custom-fields" rows="4" placeholder="Client: ACME&#10;Location: Stage 3" style="width:100%;"></textarea>
                            <small data-i18n-key="customFieldsHint"></small>
                        </div>
                    </div>
            </div>
        </div>
        </div>

        <!-- Render Video Modal -->
        <div id="render-modal" class="modal">
            <div class="modal-content">
                <span class="close-button">&times;</span>
                <h3 data-i18n-key="renderVideo"></h3>
                <div class="modal-body">
                    <div class="form-group form-row">
                        <label for="render-preset-select" data-i18n-key="renderPreset"></label>
                        <select id="render-preset-select" multiple size="6"></select>
                        <button id="reload-presets-button" class="icon-button" title="Reload">⟳</button>
                    </div>
                    <small id="preset-count" class="hint"></small>
                    <small class="hint" data-i18n-key="multiSelectHint"></small>
                    <div class="form-group form-row">
                        <label data-i18n-key="outputDir"></label>
                        <input type="text" id="render-output-dir" class="text-input" placeholder="/path/to/output" />
                        <button id="choose-render-dir-button" class="icon-button" title="Browse">…</button>
                    </div>
                    <div class="form-group form-row">
                        <label data-i18n-key="namingTemplate"></label>
                        <input type="text" id="render-name-template" class="text-input" placeholder="{timeline}_{date}" />
                    </div>
                    <small class="hint" data-i18n-key="namingVarsHint"></small>
                    <div class="modal-buttons">
                        <button id="start-render-button" class="custom-button" data-i18n-key="startRender"></button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Thumbnail Export Modal -->
        <div id="thumbnail-export-modal" class="modal">
            <div class="modal-content">
                <span class="close-button">&times;</span>
                <h3 data-i18n-key="exportThumbnails"></h3>
                <div class="modal-body">
                    <div class="form-group">
                        <p data-i18n-key="selectExportMode">请选择导出模式：</p>
                    </div>
                    <div class="modal-buttons">
                        <button id="export-all-thumbnails" class="custom-button" data-i18n-key="exportAllClips"></button>
                        <button id="export-marked-thumbnails" class="custom-button" data-i18n-key="exportMarkedOnly"></button>
                    </div>
                </div>
            </div>
        </div>

        <script type="text/javascript" src="./renderer.js"></script>
    </body>
</html>
